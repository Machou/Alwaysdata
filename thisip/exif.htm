<!DOCTYPE html>
<html lang="en" manifest="photocleaner.appcache">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="UTF-8">
	<title>Remove personal data from photos before sharing them on the internet!</title>
	<meta type="description" content="Remove extra information from images - directly in your browser">
	<meta name="viewport" content="width=device-width">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<style>#app,body{padding:1em 2em}body{font-family:'helvetica neue',helvetica,arial,sans-serif;background:#fafafa;color:#333}aside,footer,header,section{display:block}h1{font-weight:lighter}li,p{line-height:1.3em;margin:0 0 1em}#app{margin:2em 0;background:#9c9;overflow:auto}.dragdrop #app{background:#393}a{color:#666}input[type=file]{font-size:1.8em}strong{background:#fcc;padding:.2em .5em}footer{font-size:.8em;padding-top:4em}canvas{display:none}#output a{display:inline-block;margin-top:1em;background:#030;color:#fff;padding:1em;border-radius:4px;text-decoration:none;font-size:1.3em}#output ul{float:left}</style>
</head>

<body>
	<header>
		<h1>Remove personal data from photos before sharing them on the internet</h1>
	</header>
	<section>
	<p>Before you upload photos to the web, you might want to check if you 
	don't give out too much information. Cameras, smartphones and other 
	hardware does not only store the image information but also the time and
	date, what camera was used and possibly even the location on the planet
	in every image in <a href="http://en.wikipedia.org/wiki/Exchangeable_image_file_format">EXIF</a> data.</p>
	<p>Using this tool you can see this data, and download an image that has all of it removed to send out.</p>
	<p><strong>Your photo does not get uploaded anywhere, all of this happens on your device, in your browser. It even works offline.</strong></p>
	<p>Simply browse for your photo here and you get all the information in 
	it. Then click the "Download clean image" link to get the image with all
	this information stripped from it. If there is no extra data in the 
	image, it will tell you so.</p>

	<div id="app">
	<input id="getfile" type="file">
	<div id="output"></div>
	<canvas></canvas>
	</div>
	</section>
	<footer>
	<p>Written by Chris Heilmann as an add-on to my <a href="https://www.youtube.com/watch?v=gnbLLQwZxeA">TEDx Talk about making social media more social again</a>. Uses <a href="https://github.com/jseidelin/exif-js">exif.js</a> by Jacob Seidelin!</p>
	</footer>
	<script>
	!function(){var e=document.querySelector("#output"),a=window.URL||window.webkitURL,t=a.createObjectURL||!1,r=document.querySelector("#getfile"),n=document.querySelector("canvas"),i=n.getContext("2d"),l="",o=0,d=document.querySelector("#app");function c(r){document.body.classList.remove("dragdrop"),o=0;var n=r.dataTransfer?r.dataTransfer.files[0]:r.target.files[0];EXIF.getData(n,function(){l="<ul>";var r=EXIF.getAllTags(this);for(var i in r)"MakerNote"!==i&&(disp=r[i],l+="<li>"+i+": "+disp+"</li>");if(e.innerHTML=l+"</ul>",0!==i){if(t)s(a.createObjectURL(n),n.name);else{var o=new FileReader;o.readAsDataURL(n),o.onload=function(e){s(e.target.result,n.name)}}}else output.innerHTML="Image is already clean!"}),r.preventDefault()}function s(a,t){var r=new Image;r.src=a,r.onload=function(){var a,l,o,d,c;a=this,l=r.naturalWidth,o=r.naturalHeight,d=t,n.width=l,n.height=o,i.drawImage(a,0,0,l,o),c=d.replace(/\.([^\.]+)$/,"-cleaned.jpg"),e.innerHTML+='<a href="'+n.toDataURL("image/jpeg",.9)+'" download="'+c+'">Download clean image</a>'}}d.addEventListener("dragover",function(e){document.body.classList.add("dragdrop"),e.preventDefault()},!1),d.addEventListener("drop",c,!1),r.addEventListener("change",c,!1)}();

	// exif.js
	(function(){var e=this,t=function(e){return e instanceof t?e:this instanceof t?void(this.EXIFwrapped=e):new t(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.EXIF=t):e.EXIF=t;var $=t.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},r=t.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},i=t.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},o=t.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function a(e,t,$){e.addEventListener?e.addEventListener(t,$,!1):e.attachEvent&&e.attachEvent("on"+t,$)}function s(e){return!!e.exifdata}function u(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var $,r=2,i=e.byteLength;r<i;){if(255!=t.getUint8(r))return!1;if(225==($=t.getUint8(r+1)))return g(t,r+4,t.getUint16(r+2)-2);r+=2+t.getUint16(r+2)}}var x={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function d(e,t,$){for(var r,i,o,a,s,u=new DataView(e),d={},c=t;c<t+$;)28===u.getUint8(c)&&2===u.getUint8(c+1)&&(a=u.getUint8(c+2))in x&&(s=(o=u.getInt16(c+3))+5,i=x[a],r=f(u,c+5,o),d.hasOwnProperty(i)?d[i]instanceof Array?d[i].push(r):d[i]=[d[i],r]:d[i]=r),c++;return d}function c(e,t,$,r,i){var o,a,s,u=e.getUint16($,!i),x={};for(s=0;s<u;s++)o=$+12*s+2,x[a=r[e.getUint16(o,!i)]]=l(e,o,t,$,i);return x}function l(e,t,$,r,i){var o,a,s,u,x,d,c=e.getUint16(t+2,!i),l=e.getUint32(t+4,!i),g=e.getUint32(t+8,!i)+$;switch(c){case 1:case 7:if(1==l)return e.getUint8(t+8,!i);for(u=0,o=l>4?g:t+8,a=[];u<l;u++)a[u]=e.getUint8(o+u);return a;case 2:return f(e,o=l>4?g:t+8,l-1);case 3:if(1==l)return e.getUint16(t+8,!i);for(u=0,o=l>2?g:t+8,a=[];u<l;u++)a[u]=e.getUint16(o+2*u,!i);return a;case 4:if(1==l)return e.getUint32(t+8,!i);for(u=0,a=[];u<l;u++)a[u]=e.getUint32(g+4*u,!i);return a;case 5:if(1==l)return x=e.getUint32(g,!i),d=e.getUint32(g+4,!i),(s=new Number(x/d)).numerator=x,s.denominator=d,s;for(u=0,a=[];u<l;u++)x=e.getUint32(g+8*u,!i),d=e.getUint32(g+4+8*u,!i),a[u]=new Number(x/d),a[u].numerator=x,a[u].denominator=d;return a;case 9:if(1==l)return e.getInt32(t+8,!i);for(u=0,a=[];u<l;u++)a[u]=e.getInt32(g+4*u,!i);return a;case 10:if(1==l)return e.getInt32(g,!i)/e.getInt32(g+4,!i);for(u=0,a=[];u<l;u++)a[u]=e.getInt32(g+8*u,!i)/e.getInt32(g+4+8*u,!i);return a}}function f(e,t,$){var r="";for(n=t;n<t+$;n++)r+=String.fromCharCode(e.getUint8(n));return r}function g(e,t){if("Exif"!=f(e,t,4))return!1;var a,s,u,x,d,l=t+6;if(18761==e.getUint16(l))a=!1;else{if(19789!=e.getUint16(l))return!1;a=!0}if(42!=e.getUint16(l+2,!a))return!1;var g=e.getUint32(l+4,!a);if(g<8)return!1;if((s=c(e,l,l+g,r,a)).ExifIFDPointer)for(u in x=c(e,l,l+s.ExifIFDPointer,$,a)){switch(u){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":x[u]=o[u][x[u]];break;case"ExifVersion":case"FlashpixVersion":x[u]=String.fromCharCode(x[u][0],x[u][1],x[u][2],x[u][3]);break;case"ComponentsConfiguration":x[u]=o.Components[x[u][0]]+o.Components[x[u][1]]+o.Components[x[u][2]]+o.Components[x[u][3]]}s[u]=x[u]}if(s.GPSInfoIFDPointer)for(u in d=c(e,l,l+s.GPSInfoIFDPointer,i,a))"GPSVersionID"===u&&(d[u]=d[u][0]+"."+d[u][1]+"."+d[u][2]+"."+d[u][3]),s[u]=d[u];return s}t.getData=function(e,t){return(!(e instanceof Image||e instanceof HTMLImageElement)||!!e.complete)&&(s(e)?t&&t.call(e):function e(t,$){function r(e){var r=u(e),i=function e(t){var $=new DataView(t);if(255!=$.getUint8(0)||216!=$.getUint8(1))return!1;for(var r=2,i=t.byteLength;r<i;){if(o=$,a=r,56===o.getUint8(a)&&66===o.getUint8(a+1)&&73===o.getUint8(a+2)&&77===o.getUint8(a+3)&&4===o.getUint8(a+4)&&4===o.getUint8(a+5)){var o,a,s,u=$.getUint8(r+7);return u%2!=0&&(u+=1),0===u&&(u=4),d(t,r+8+u,$.getUint16(r+6+u))}r++}}(e);t.exifdata=r||{},t.iptcdata=i||{},$&&$.call(t)}if(t instanceof Image||t instanceof HTMLImageElement){if(/^data\:/i.test(t.src))r(function e(t,$){$=$||t.match(/^data\:([^\;]+)\;base64,/mi)[1]||"";for(var r=atob(t=t.replace(/^data\:([^\;]+)\;base64,/gmi,"")),i=r.length,o=new ArrayBuffer(i),a=new Uint8Array(o),s=0;s<i;s++)a[s]=r.charCodeAt(s);return o}(t.src));else if(/^blob\:/i.test(t.src)){var i,o,a,s=new FileReader;s.onload=function(e){r(e.target.result)},i=t.src,o=function(e){s.readAsArrayBuffer(e)},(a=new XMLHttpRequest).open("GET",i,!0),a.responseType="blob",a.onload=function(e){(200==this.status||0===this.status)&&o(this.response)},a.send()}else{var x=new XMLHttpRequest;x.onload=function(){if("200"==x.status)r(x.response);else throw"Could not load image";x=null},x.open("GET",t.src,!0),x.responseType="arraybuffer",x.send(null)}}else if(window.FileReader&&(t instanceof window.Blob||t instanceof window.File)){var s=new FileReader;s.onload=function(e){r(e.target.result)},s.readAsArrayBuffer(t)}}(e,t),!0)},t.getTag=function(e,t){if(s(e))return e.exifdata[t]},t.getAllTags=function(e){if(!s(e))return{};var t,$=e.exifdata,r={};for(t in $)$.hasOwnProperty(t)&&(r[t]=$[t]);return r},t.pretty=function(e){if(!s(e))return"";var t,$=e.exifdata,r="";for(t in $)$.hasOwnProperty(t)&&("object"==typeof $[t]?$[t]instanceof Number?r+=t+" : "+$[t]+" ["+$[t].numerator+"/"+$[t].denominator+"]\r\n":r+=t+" : ["+$[t].length+" values]\r\n":r+=t+" : "+$[t]+"\r\n");return r},t.readFromBinaryFile=function(e){return u(e)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return t})}).call(this);
	</script>
</body>
</html>